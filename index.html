<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calm Pomodoro — Timer</title>
  <style>
    :root{
      --bg1: #f0f7f4;
      --bg2: #e8f2ee;
      --accent: #5a8a72;
      --muted: #7c8b86;
      --glass: rgba(255,255,255,0.6);
    }
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, Roboto, 'Segoe UI', sans-serif;color:#123;}
    body{
      background: radial-gradient(1200px 600px at 10% 20%, #eaf7f2 0%, transparent 20%),
                  radial-gradient(800px 400px at 90% 80%, #f3fbf8 0%, transparent 18%),
                  linear-gradient(180deg,var(--bg1),var(--bg2));
      display:flex;align-items:center;justify-content:center;padding:32px;box-sizing:border-box;
    }

    .card{
      width:980px;max-width:100%;display:grid;grid-template-columns:420px 1fr;gap:28px;align-items:center;padding:26px;border-radius:18px;background:linear-gradient(180deg, rgba(255,255,255,0.7), rgba(255,255,255,0.55));box-shadow:0 10px 30px rgba(16,24,32,0.08);backdrop-filter: blur(6px);
    }

    .plant-area{display:flex;flex-direction:column;align-items:center;gap:18px;padding:12px}
    .plant-card{width:360px;height:360px;border-radius:14px;background:linear-gradient(180deg,#ffffff, rgba(240,250,245,0.6));display:flex;align-items:center;justify-content:center;box-shadow: inset 0 -6px 20px rgba(90,138,114,0.03);position:relative;overflow:hidden}

    .plant-svg{width:220px;height:260px;transform-origin:50% 100%;animation: sway 6s ease-in-out infinite}
    @keyframes sway{0%{transform: rotate(-1deg)}50%{transform: rotate(2deg)}100%{transform: rotate(-1deg)}}
    .leaf{transform-origin:center center;animation: leafGrow 4s ease-in-out infinite}
    .leaf:nth-child(2){animation-delay:0.3s}
    .leaf:nth-child(3){animation-delay:0.6s}
    @keyframes leafGrow{0%{transform: scale(0.98)}50%{transform: scale(1.02)}100%{transform: scale(0.98)}}

    .controls{padding:20px}
    h1{margin:0;font-size:28px;color:var(--accent)}
    .timer-display{margin-top:18px;font-size:68px;font-weight:600;letter-spacing:2px;color:#134;}
    .subtitle{color:var(--muted);margin-top:6px}

    .presets{display:flex;gap:10px;margin:18px 0}
    .preset-btn{padding:10px 14px;border-radius:10px;border:none;background:var(--glass);cursor:pointer;font-weight:600}
    .preset-btn.active{background:linear-gradient(90deg,#e9f6ee,#f8fffb);box-shadow:0 6px 16px rgba(20,40,30,0.06)}

    .custom-row{display:flex;gap:10px;align-items:center}
    input[type="number"]{width:120px;padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);font-size:16px}
    .controls-footer{display:flex;gap:12px;margin-top:18px}
    .big-btn{padding:12px 16px;border-radius:12px;border:none;background:var(--accent);color:white;font-weight:700;cursor:pointer}
    .ghost-btn{background:transparent;border:1px solid rgba(0,0,0,0.06);padding:10px 14px;border-radius:12px;cursor:pointer}

    .progress-wrap{position:relative;height:12px;background:rgba(0,0,0,0.05);border-radius:999px;margin-top:18px;overflow:hidden}
    .progress-bar{height:100%;width:0%;background:linear-gradient(90deg,#7fbf99,#5a8a72);transition:width 0.2s linear}

    .music-player{display:flex;align-items:center;gap:10px;margin-top:20px;background:rgba(255,255,255,0.5);padding:10px 14px;border-radius:12px;box-shadow:inset 0 0 10px rgba(0,0,0,0.05)}
    .music-progress{flex:1;height:6px;background:rgba(0,0,0,0.1);border-radius:999px;cursor:pointer;overflow:hidden}
    .music-bar{height:100%;width:0%;background:linear-gradient(90deg,#8cc4a6,#5a8a72)}
    .music-btn{background:none;border:none;cursor:pointer;font-size:20px;color:var(--accent)}
    .volume{width:80px}

    footer.small{font-size:12px;color:var(--muted);margin-top:14px}

    /* Support Me Banner */
    .support-banner {
      margin-top:18px;
      padding:10px 16px;
      background: rgba(90, 138, 114, 0.1);
      border-radius:12px;
      text-align:center;
      font-weight:600;
      color:#5a8a72;
      transition: background 0.3s;
    }
    .support-banner a {
      text-decoration: none;
      color: inherit;
    }
    .support-banner:hover {
      background: rgba(90, 138, 114, 0.2);
      cursor: pointer;
    }

    @media (max-width:900px){.card{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <div class="card">
    <section class="plant-area">
      <div class="plant-card">
        <svg class="plant-svg" viewBox="0 0 200 260" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="g1" x1="0" x2="1">
              <stop offset="0%" stop-color="#aee2c1" />
              <stop offset="100%" stop-color="#5a8a72" />
            </linearGradient>
          </defs>
          <g transform="translate(20,200)">
            <rect x="20" y="18" width="120" height="30" rx="8" fill="#d9c5b5" />
            <rect x="10" y="0" width="140" height="18" rx="8" fill="#f6ede6" opacity="0.9"/>
          </g>
          <g transform="translate(100,170)">
            <g class="leaf" transform="translate(0,-40)">
              <path d="M0 0 C -22 -8 -36 -28 -20 -48 C -6 -28 6 -18 0 0" fill="url(#g1)"/>
            </g>
            <g class="leaf" transform="translate(10,-48) rotate(12)">
              <path d="M0 0 C -20 -6 -30 -26 -14 -46 C 2 -26 8 -16 0 0" fill="url(#g1)"/>
            </g>
            <g class="leaf" transform="translate(-16,-60) rotate(-18)">
              <path d="M0 0 C -18 -6 -30 -26 -12 -46 C 4 -26 10 -16 0 0" fill="url(#g1)"/>
            </g>
          </g>
        </svg>
      </div>
      <div class="plant-info"><strong>Grow with your focus.</strong></div>
    </section>

    <section class="controls">
      <h1>Calm Pomodoro</h1>
      <div class="subtitle">Pick a preset or set a custom timer. Click start to focus.</div>
      <div class="timer-display" id="timeDisplay">25:00</div>
      <div class="presets">
        <button class="preset-btn active" data-mins="25">Focus — 25</button>
        <button class="preset-btn" data-mins="5">Short Break — 5</button>
        <button class="preset-btn" data-mins="15">Long Break — 15</button>
      </div>
      <div class="custom-row">
        <label for="customMins">Custom (min)</label>
        <input type="number" id="customMins" min="1" max="480" value="30" />
        <button class="ghost-btn" id="setCustom">Set</button>
      </div>
      <div class="controls-footer">
        <button class="big-btn" id="startPause">Start</button>
        <button class="ghost-btn" id="reset">Reset</button>
        <button class="ghost-btn" id="skip">Skip</button>
      </div>
      <div class="progress-wrap"><div class="progress-bar" id="progressBar"></div></div>
      <div class="small"><span id="sessionLabel">Session: Focus</span> • <span id="cycles">Completed: 0</span></div>
      <div class="music-player">
        <button class="music-btn" id="musicToggle">▶</button>
        <div class="music-progress" id="musicProgress"><div class="music-bar" id="musicBar"></div></div>
        <input type="range" class="volume" id="musicVolume" min="0" max="1" step="0.01" value="0.5" />
      </div>
      <footer class="small">Tip: Space = Start/Pause, R = Reset</footer>

      <!-- Support Me Banner -->
      <div class="support-banner">
        <a href="https://www.buymeacoffee.com/gekkouga" target="_blank">
          ☕ Support Me
        </a>
      </div>

    </section>
  </div>

  <script>
  (function(){
    const timeDisplay=document.getElementById('timeDisplay');
    const presets=document.querySelectorAll('.preset-btn');
    const customMins=document.getElementById('customMins');
    const setCustom=document.getElementById('setCustom');
    const startPauseBtn=document.getElementById('startPause');
    const resetBtn=document.getElementById('reset');
    const skipBtn=document.getElementById('skip');
    const progressBar=document.getElementById('progressBar');
    const sessionLabel=document.getElementById('sessionLabel');
    const cyclesLabel=document.getElementById('cycles');

    let totalSeconds=25*60,remaining=totalSeconds,timer=null,running=false,sessionType='Focus',completed=0;
    function formatTime(s){const m=Math.floor(s/60).toString().padStart(2,'0');const ss=Math.floor(s%60).toString().padStart(2,'0');return `${m}:${ss}`}
    function setPreset(mins,type){totalSeconds=mins*60;remaining=totalSeconds;sessionType=type;updateUI();}
    presets.forEach(btn=>btn.addEventListener('click',()=>{presets.forEach(b=>b.classList.remove('active'));btn.classList.add('active');setPreset(parseInt(btn.dataset.mins),'Focus')}));
    setCustom.addEventListener('click',()=>{const v=parseInt(customMins.value);if(!v||v<1){alert('Enter valid minutes');return;}presets.forEach(b=>b.classList.remove('active'));setPreset(v,'Custom');});
    function updateUI(){timeDisplay.textContent=formatTime(remaining);sessionLabel.textContent='Session: '+sessionType;progressBar.style.width=((1-remaining/totalSeconds)*100)+'%';}
    function tick(){if(remaining>0){remaining--;updateUI();}else{clearInterval(timer);timer=null;running=false;startPauseBtn.textContent='Start';playBeep();if(sessionType==='Focus'){completed++;cyclesLabel.textContent='Completed: '+completed;document.querySelector('.plant-svg').animate([{transform:'scale(1)'},{transform:'scale(1.04)'},{transform:'scale(1)'}],{duration:800,easing:'ease-out'});}}}
    function startPause(){if(running){clearInterval(timer);timer=null;running=false;startPauseBtn.textContent='Start';}else{if(remaining<=0)remaining=totalSeconds;timer=setInterval(tick,1000);running=true;startPauseBtn.textContent='Pause';}}
    startPauseBtn.addEventListener('click',startPause);
    resetBtn.addEventListener('click',()=>{clearInterval(timer);timer=null;running=false;startPauseBtn.textContent='Start';remaining=totalSeconds;updateUI();});
    skipBtn.addEventListener('click',()=>{remaining=0;updateUI();tick();});
    document.addEventListener('keydown',e=>{if(e.code==='Space'){e.preventDefault();startPause();}if(e.key.toLowerCase()==='r'){resetBtn.click();}});
    function playBeep(){try{const ctx=new(AudioContext||webkitAudioContext)();const o=ctx.createOscillator();const g=ctx.createGain();o.type='sine';o.frequency.value=880;o.connect(g);g.connect(ctx.destination);const now=ctx.currentTime;g.gain.setValueAtTime(0.0001,now);g.gain.exponentialRampToValueAtTime(0.08,now+0.02);o.start(now);g.gain.exponentialRampToValueAtTime(0.0001,now+1);o.stop(now+1.02);}catch(err){}}
    updateUI();

    // MUSIC PLAYER
    const audio=new Audio('calm.mp3');audio.loop=true;audio.volume=0.5;
    const toggle=document.getElementById('musicToggle');
    const progress=document.getElementById('musicProgress');
    const bar=document.getElementById('musicBar');
    const volume=document.getElementById('musicVolume');

    toggle.addEventListener('click',()=>{if(audio.paused){audio.play();toggle.textContent='⏸';}else{audio.pause();toggle.textContent='▶';}});
    audio.addEventListener('timeupdate',()=>{const pct=(audio.currentTime/audio.duration)*100;bar.style.width=pct+'%';});
    progress.addEventListener('click',e=>{const rect=progress.getBoundingClientRect();const x=e.clientX-rect.left;const pct=x/rect.width;audio.currentTime=pct*audio.duration;});
    volume.addEventListener('input',()=>{audio.volume=volume.value;});
  })();
  </script>
</body>
</html>

